<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="../stylesheets/bootstrap.min.css">

    <!-- icon -->
    <link rel="shortcut icon" href="../icon/favicon.ico" type="image/x-icon">
    <link rel="icon" href="../icon/favicon.ico" type="image/x-icon">

    <title>登录界面</title>
    <!-- recaptcha -->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>

<body class="bg-light">
    <div class="container">
       <div class="text-center "><svg t="1652585211369" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1120" width="120" height="120"><path d="M509.1328 967.2704c-251.6992 0-455.68-203.9808-455.68-455.68s203.9808-455.68 455.68-455.68 455.68 203.9808 455.68 455.68-203.9808 455.68-455.68 455.68z" fill="#E7CC37" p-id="1121"></path><path d="M382.3616 693.3504h78.0288v39.2192h-78.0288zM567.296 693.3504h78.0288v39.2192H567.296z" fill="#C67035" p-id="1122"></path><path d="M349.0816 640.9216h329.4208v62.6688H349.0816z" fill="#C67035" p-id="1123"></path><path d="M349.0816 586.752h329.4208v54.1696H349.0816z" fill="#FFFFFF" p-id="1124"></path><path d="M698.88 598.2208H328.8064c-3.3792 0-6.144-2.7648-6.144-6.144V223.8464c0-3.3792 2.7648-6.144 6.144-6.144h370.0736c3.3792 0 6.144 2.7648 6.144 6.144v368.2304c0 3.4816-2.7648 6.144-6.144 6.144z" fill="#E7CC37" p-id="1125"></path><path d="M409.4976 486.7072h208.6912" fill="#EBE163" p-id="1126"></path><path d="M481.4848 486.7072h26.112v29.184h-26.112zM520.0896 486.7072h26.112v29.184h-26.112z" fill="#FFFFFF" p-id="1127"></path><path d="M657.8176 263.68m-12.0832 0a12.0832 12.0832 0 1 0 24.1664 0 12.0832 12.0832 0 1 0-24.1664 0Z" fill="#E7AA31" p-id="1128"></path><path d="M373.3504 547.0208m-12.0832 0a12.0832 12.0832 0 1 0 24.1664 0 12.0832 12.0832 0 1 0-24.1664 0Z" fill="#E7AA31" p-id="1129"></path><path d="M373.3504 263.68m-17.3056 0a17.3056 17.3056 0 1 0 34.6112 0 17.3056 17.3056 0 1 0-34.6112 0Z" fill="#E7AA31" p-id="1130"></path><path d="M657.8176 548.2496m-17.3056 0a17.3056 17.3056 0 1 0 34.6112 0 17.3056 17.3056 0 1 0-34.6112 0Z" fill="#E7AA31" p-id="1131"></path><path d="M460.6976 367.0016m-47.0016 0a47.0016 47.0016 0 1 0 94.0032 0 47.0016 47.0016 0 1 0-94.0032 0Z" fill="#FFFFFF" p-id="1132"></path><path d="M566.9888 366.3872m-47.0016 0a47.0016 47.0016 0 1 0 94.0032 0 47.0016 47.0016 0 1 0-94.0032 0Z" fill="#FFFFFF" p-id="1133"></path><path d="M550.5024 367.0016a17.2032 15.0528 90 1 0 30.1056 0 17.2032 15.0528 90 1 0-30.1056 0Z" fill="#323333" p-id="1134"></path><path d="M447.0784 367.0016a17.2032 15.0528 90 1 0 30.1056 0 17.2032 15.0528 90 1 0-30.1056 0Z" fill="#323333" p-id="1135"></path><path d="M489.0624 417.9968s-8.6016-56.5248 24.7808-56.5248 24.7808 56.5248 24.7808 56.5248M385.536 424.5504s35.2256-59.4944 78.0288 0M566.9888 426.5984s35.2256-59.4944 78.0288 0" fill="#E7CC37" p-id="1136"></path><path d="M425.472 419.328m-3.4816 0a3.4816 3.4816 0 1 0 6.9632 0 3.4816 3.4816 0 1 0-6.9632 0Z" fill="#972D24" p-id="1137"></path><path d="M413.7984 428.032m-3.4816 0a3.4816 3.4816 0 1 0 6.9632 0 3.4816 3.4816 0 1 0-6.9632 0Z" fill="#972D24" p-id="1138"></path><path d="M437.248 428.032m-3.4816 0a3.4816 3.4816 0 1 0 6.9632 0 3.4816 3.4816 0 1 0-6.9632 0Z" fill="#972D24" p-id="1139"></path><path d="M606.0032 419.328m-3.4816 0a3.4816 3.4816 0 1 0 6.9632 0 3.4816 3.4816 0 1 0-6.9632 0Z" fill="#972D24" p-id="1140"></path><path d="M594.2272 428.032m-3.4816 0a3.4816 3.4816 0 1 0 6.9632 0 3.4816 3.4816 0 1 0-6.9632 0Z" fill="#972D24" p-id="1141"></path><path d="M617.6768 428.032m-3.4816 0a3.4816 3.4816 0 1 0 6.9632 0 3.4816 3.4816 0 1 0-6.9632 0Z" fill="#972D24" p-id="1142"></path><path d="M488.0384 598.2208l6.5536 42.7008-6.5536 43.4176 25.8048 26.9312 25.8048-23.6544-6.4512-46.6944 6.4512-42.7008z" fill="#D7261A" p-id="1143"></path><path d="M404.48 732.5696h33.792v34.9184h-33.792z" fill="#E7CC37" p-id="1144"></path><path d="M438.272 793.1904h-33.792v-25.7024h33.792z" fill="#FFFFFF" p-id="1145"></path><path d="M362.5984 822.272h90.112c4.8128 0 8.4992-4.4032 7.5776-9.1136-1.7408-9.216-7.168-22.016-23.8592-22.016v2.8672h-26.9312v-2.8672s-15.872 1.7408-21.6064-2.048c-5.5296-3.6864-44.4416-16.0768-31.4368 28.5696 0.8192 2.6624 3.2768 4.608 6.144 4.608z" fill="#323333" p-id="1146"></path><path d="M623.234048 767.44704h-33.792v-34.9184h33.792z" fill="#E7CC37" p-id="1147"></path><path d="M589.4144 793.1904h33.792v-25.7024h-33.792z" fill="#FFFFFF" p-id="1148"></path><path d="M665.1904 822.272h-90.112c-4.8128 0-8.4992-4.4032-7.5776-9.1136 1.7408-9.216 7.168-22.016 23.8592-22.016v2.8672h26.9312v-2.8672s15.872 1.7408 21.6064-2.048c5.5296-3.6864 44.4416-16.0768 31.4368 28.5696-0.8192 2.6624-3.3792 4.608-6.144 4.608z" fill="#323333" p-id="1149"></path><path d="M312.9344 667.8528v-84.7872h-13.7216v84.7872a24.14592 24.14592 0 0 0-17.3056 23.2448c0 13.4144 10.8544 24.1664 24.1664 24.1664 13.4144 0 24.1664-10.8544 24.1664-24.1664 0-11.0592-7.2704-20.2752-17.3056-23.2448z" fill="#E7CC37" p-id="1150"></path><path d="M320.4096 534.1184s-26.9312 12.8-28.672 55.808c-0.1024 2.4576 1.2288 4.5056 2.9696 4.5056H320.512v-60.3136z" fill="#FFFFFF" p-id="1151"></path><path d="M713.728 667.8528v-84.7872h13.7216v84.7872c10.0352 2.9696 17.3056 12.1856 17.3056 23.2448 0 13.4144-10.8544 24.1664-24.1664 24.1664-13.4144 0-24.1664-10.8544-24.1664-24.1664 0-11.0592 7.2704-20.2752 17.3056-23.2448z" fill="#E7CC37" p-id="1152"></path><path d="M706.2528 534.1184s26.9312 12.8 28.672 55.808c0.1024 2.4576-1.2288 4.5056-2.9696 4.5056h-25.8048v-60.3136z" fill="#FFFFFF" p-id="1153"></path></svg></div>
        <div class="mb-5" id="register" style="display: none;"> 
            <h2 class="text-center mt-5">注册</h2>
            <small class="form-text text-muted">账号：</small>
            <input type="text" class="form-control" name="" id="name1" placeholder="账号">
            <small class="form-text text-muted">密码：</small>
            <input type="password" class="form-control" name="" id="password1" placeholder="密码">
            <small class="form-text text-muted">确认密码：</small>
            <input type="password" class="form-control" name="" id="repassword" placeholder="确认密码">
            <div  class="text-center mt-3"><button id="registerbtn" class="text-white border-0 btn-info rounded me-4" style="height: 40px;">确认注册</button><button class="text-white border-0 btn-info rounded ms-4" style="height: 40px; " onclick="document.location.reload();">返回</button></div>
        </div>

        <div class="mb-5" id="login"> 
            <h2 class="text-center mt-5">登录</h2>
            <small class="form-text text-muted">账号：</small>
            <input type="text" class="form-control" name="" id="name" placeholder="账号">
            <small class="form-text text-muted">密码：</small>
            <input type="password" class="form-control" name="" id="password" placeholder="密码">
            <div  class="text-center mt-3"><button id="submitbtn" class="text-white border-0 btn-info rounded me-4" style="height: 40px;">登录</button><button id="toregister" class="text-white border-0 btn-info rounded ms-4" style="height: 40px;">注册</button></div>
        </div>
        
    </div>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    -->
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script src="../js/common.js"></script>
    <script src="../js/jsencrypt.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#toregister").click(function(){
                $("#register").show();
                $("#login").hide();
            });
            $("#registerbtn").click(function(){
                var name=$("#name1").val();
                var password=$("#password1").val();
                var repassword=$("#repassword").val();
                var recaptcha=$(".g-recaptcha").val();
                if (password!=repassword){
                    window.alert("输入的密码不一致");
                }
                else{
                    var data={"name":name,"password":password};
                    $.ajax({
                        type: "POST",
                        url: remoteUrl+'/register',
                        contentType : "application/json;charset=utf-8",
                        data : JSON.stringify(data),
                        success: function (response) {
                            if(response.code==0){
                                window.alert(response.msg);
                            }
                            else{
                                window.alert(response.msg);
                                document.location.reload();
                            }
                        }
                    });
                }
                
            });
             $("#submitbtn").click(function () {
                var name=$("#name").val();
                var password=$("#password").val();
                var datas={"encrypted":encryption(name+"$"+password)};
                $.ajax({
                    url : remoteUrl+'/login',
                    type : "POST",
                    contentType : "application/json;charset=utf-8",
                    data : JSON.stringify(datas),
                    success : function(data){
                        if(data.code=="1"){
                            window.location.replace(remoteUrl+"/home.html");
                        }
                        else{
                            window.alert("登录失败");
                        }
                    },
                    error : function(xhr){
                        console.log(xhr.responseText);
                    }
                    
                });
            });
        });
        function encryption(str){
            var encrypt = new JSEncrypt();
            encrypt.setPublicKey(public_key);
            var encrypted = encrypt.encrypt(str);
            return encrypted;
        }
        function dencryption(encrypted){
            var decrypt = new JSEncrypt();
            decrypt.setPrivateKey(private_key);
            var decrypted = decrypt.decrypt(encrypted);
            return decrypted;
        }
    </script>
</body>

</html>